(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function t(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(a){if(a.ep)return;a.ep=!0;const s=t(a);fetch(a.href,s)}})();async function fe(e,n=null,t=0,o=100){let a={};n&&(a.headers=n),a.method="GET";let s=`offset=${t}&limit=${o}`,i=new URL(e);i.search=new URLSearchParams(s);try{return await(await fetch(i,a)).json()}catch(r){throw console.error(`Error: ${r}`),r}}async function z(e,n={}){return fetch(e,{...n})}const C=new URL("https://cors.noroff.dev/https://agency-api.noroff.dev/"),I=C.toString(),ge="application/",K="company/",$="listings/",ye="users/",ve=async e=>{if(!e)throw new Error("Get requires a listing ID");const n=C.toString()+$+e;try{const t=await z(n);if(!t||!t.ok){const o="Error retrieving listing: "+(t?t.statusText:"Response is undefined");throw new Error(o)}return t.json()}catch(t){throw console.error("Get listing failed:",t),t}},p=(e,n,t,o,a,s,i)=>{const r=document.createElement(e);return Array.isArray(n)&&r.classList.add(...n),Array.isArray(t)&&t.length&&r.append(...t),o&&(r.textContent=o),a&&(r.href=a),e==="img"&&(r.src=s,r.alt=i),r},re=e=>new Date(e).toLocaleDateString(),he=e=>{const n=new Date,t=new Date(e),o=Math.abs(n.getTime()-t.getTime());return Math.ceil(o/(1e3*3600*24))},Z=async()=>{const n=new URL(location.href).searchParams.get("id"),t=document.head.children[4],o=document.getElementById("listingContainer"),a=document.querySelector(".editDeleteListingButton");if(n){const s=await ve(n),{title:i,company:r}=s;t.content=`View ${i} Application at Noroff Job Agency`;const l=localStorage.getItem("email")?localStorage.getItem("email").replace(/"/g,"").trim():null,d=localStorage.getItem("role")?localStorage.getItem("role").replace(/"/g,"").trim():null,u=be(s,d),m=u.querySelector(".buttonContainer");if(o.append(u),d==="Applicant"&&a.classList.add("d-none"),l===r.name){m.innerHTML="";const c=p("a",["btn","btn-theme-secondary","text-uppercase","rounded-0","applyBtn"],null,"Edit listing"),f=p("button",["btn","btn-theme-dark"],null,"Delete listing");m.append(c,f)}else d==="Company"&&m.classList.add("d-none")}else alert("No id provided"),setTimeout(()=>{location.href="../index.html"},2e3)},be=(e,n)=>{const{company:t,title:o,description:a,deadline:s,created:i,requirements:r,tags:l}=e,d=p("div"),u=p("div",["card","bg-theme-light","d-flex","border-0","rounded-0"]),m=we(t),c=Le(o,a,s,t,i,r,l,n);return u.append(m,c),d.append(u),d},we=({name:e,logo:n})=>p("img",["listing-logo","my-5","card-img-top","rounded","w-75"],null,null,null,n,e),Le=(e,n,t,o,a,s,i,r)=>{const l=p("div",["card-body","d-flex","flex-column","gap-2"]),d=p("h1",["card-title"],null,e),u=Ee(e,o,t,a),m=xe(r),c=Se(i),f=p("p",null,null,n),y=ke(s);return l.append(d,u,m,c,f,y),l},Ee=(e,n,t,o)=>{const a=p("div"),{sector:s,name:i}=n,r=p("p",null,null,`${e}  /  ${s}  /  ${i}`),l=p("p",null,null,`Created: ${he(o)} days ago / Deadline: ${re(t)}`);return a.append(r,l),a},xe=e=>{const n=p("div",["d-flex","align-items-center","gap-2","my-3","buttonContainer"]);if(e==="Client")return n;const t=p("a",["btn","btn-theme-secondary","text-uppercase","w-100","rounded-0","applyBtn"],null,"Apply for job");t.dataset.auth="applyForJob",n.append(t);const o=p("img",null,null,null,null,"/assets/icons/heart-fav.svg","heart icon");o.style="width: 30px";const a=p("button",["btn","btn-theme-light"],[o]);return a.dataset.auth="favoriteListing",n.append(a),n},Se=e=>{const n=p("div",["d-flex","flex-wrap","gap-2"]);return e.forEach(t=>{const o=p("span",["badge","bg-dark"],null,t);n.append(o)}),n},ke=e=>{const n=p("div"),t=p("h2",["fs-5","fw-semibold"],null,"Requirements:"),o=p("ul");return e.forEach(a=>{const s=p("li",null,null,a);o.append(s)}),n.append(t,o),n},Ce=()=>{const e=document.querySelector("header");e.setAttribute("data-testid","header"),e.classList.add("bg-theme-dark","fixed-top","align-items-center","shadow-lg","p-2");const n=document.createElement("nav");n.classList.add("navbar","navbar-dark","navbar-expand-md","p-0"),n.setAttribute("role","navigation"),n.setAttribute("aria-label","Main navigation");const t=document.createElement("div");t.classList.add("container-fluid");const o=document.createElement("a");o.classList.add("navbar-brand","m-0","p-0"),o.href="/",o.setAttribute("aria-label","Noroff Job Agency home page");const a=document.createElement("img");a.src="/assets/logo/noroff-logo.png",a.setAttribute("width","150"),a.alt="Noroff Job Agency Logo",o.append(a);const s=document.createElement("button");s.classList.add("navbar-toggler","collapsed","border-0","ms-auto","p-0"),s.setAttribute("type","button"),s.setAttribute("data-bs-toggle","collapse"),s.setAttribute("data-bs-target","#navbarNavDropdown"),s.setAttribute("aria-controls","navbarNavDropdown"),s.setAttribute("aria-expanded","false"),s.setAttribute("aria-label","Toggle navigation");const i=document.createElement("span");i.classList.add("navbar-toggler-icon"),s.append(i);const r=document.createElement("div");r.classList.add("collapse","navbar-collapse"),r.id="navbarNavDropdown";const l=document.createElement("ul");return l.classList.add("navbar-nav","ms-auto","align-items-center","text-center","gap-4","p-3","p-md-0"),l.id="navUl",l.setAttribute("role","button"),l.setAttribute("aria-labelledby","navUl"),r.append(l),t.append(o,s,r),n.append(t),e.append(n),e};class G{constructor(n,t,o=!1){if(!n)throw new Error("Key is required");this.storage=o?localStorage:sessionStorage,this.key=n,this.state=t}get state(){try{return JSON.parse(this.storage.getItem(this.key))}catch(n){console.error(n);return}}set state(n){n!==void 0&&this.storage.setItem(this.key,JSON.stringify(n))}clear(){localStorage.getItem(this.key)&&localStorage.removeItem(this.key),sessionStorage.getItem(this.key)&&sessionStorage.removeItem(this.key)}}async function Te(e,n){const t="https://cors.noroff.dev/https://agency-api.noroff.dev/users/login",o={method:"POST",body:JSON.stringify({email:e,password:n}),headers:{"Content-Type":"application/json"}},a=await fetch(t,o),s=await a.json();return a.ok?{userData:s,error:null}:{userData:null,error:s}}function T(e,n,t){const o=document.querySelector(t);o.innerHTML="";const a=document.createElement("div");a.innerHTML=`
    <div class="alert alert-${e} alert-dismissible" role="alert">
        <div class="w-75">${n}</div>
        <button type="button" class="btn-close m-auto p-3" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>`,o.append(a)}function Ie(e,n,t){const{token:o,role:a,id:s,email:i}=e;new t("token",o,n),new t("role",a,n),new t("email",i,n),new t("id",s,n)}function qe(e){new e("token").clear(),new e("role").clear(),new e("email").clear(),new e("id").clear()}function Ne(e){window.location.replace(e)}function $e(e){switch(e){case"Applicant":return"/";case"Admin":return"/";case"Client":return"/";default:return"/"}}async function De(e){const{remember:n,email:t,password:o}=e,a=n==="on";try{const{userData:s,error:i}=await Te(t,o);if(i){T("danger","Invalid login credentials. Please try again","#errorContainer");return}const{role:r}=s;qe(G),Ie(s,a,G);const l=$e(r);Ne(l)}catch(s){T("danger","An unknown error occurred. Please try again later","#errorContainer"),console.error(s)}}const W=function(){localStorage.removeItem("token"),sessionStorage.removeItem("token"),localStorage.removeItem("profile"),sessionStorage.removeItem("profile"),localStorage.removeItem("role"),sessionStorage.removeItem("role"),localStorage.removeItem("id"),sessionStorage.removeItem("id"),localStorage.removeItem("email"),sessionStorage.removeItem("email"),localStorage.removeItem("companyId"),localStorage.removeItem("companyName"),window.location.replace("/")};async function le(e){const t=await fetch("https://cors.noroff.dev/https://agency-api.noroff.dev/users",{headers:{"Content-Type":"application/json"},method:"POST",mode:"cors",body:JSON.stringify(e)}),o=await t.json();return t.ok?{data:o,error:null}:{data:null,error:Ae(o)}}function Ae(e){return e!=null&&e.message?e.message:e!=null&&e.errors&&Array.isArray(e==null?void 0:e.errors)?e.errors.map(n=>n.message).join(`
`):e!=null&&e.status&&(e!=null&&e.text)?`Error: ${e.status}, ${e.text}`:"There was an error processing the request."}function D(){let e=sessionStorage.getItem("token");if(e)return e=e.replace(/^"|"$/g,""),e;let n=localStorage.getItem("token");return n?(n=n.replace(/^"|"$/g,""),n):null}async function Pe(e){let n=e.registerToken;n||(n=D().replace(/^"|"$/g,""));const t=C.toString()+K,o=await fetch(t,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},method:"POST",body:JSON.stringify(e)}),a=await o.json();if(!o.ok)throw new Error(a.message);return a}function F(e,n=null){e.setAttribute("tabindex","0"),e.addEventListener("keydown",t=>{t.key==="Enter"&&(n?window.location.href=n.href:window.location.href=e.href)})}function j(e){if(e!=null){const n=document.createElement("li");n.classList.add("nav-item");const t=document.createElement("button");return t.classList.add("btn","btn-theme-secondary","fw-semibold"),t.id="signOut",t.textContent="Log out",t.setAttribute("tabindex","1"),t.setAttribute("aria-label","log out"),F(n),t.addEventListener("click",()=>{W()}),n.addEventListener("keydown",o=>{o.key==="Enter"&&(o.preventDefault(),W())}),n.append(t),n}else if(e===null){const n=document.createElement("li");n.classList.add("nav-item");const t=document.createElement("a");return t.classList.add("btn","btn","btn-outline-light","text-white","fw-semibold","navBtnCustomWidth"),t.href="/pages/auth/login/",t.id="navItems",t.textContent="Log in",t.setAttribute("aria-label","log in"),F(n,t),n.append(t),n}}let Be=document.querySelector("title");Be.innerText="Standard";const Re=()=>{const e=localStorage.getItem("role");let n=JSON.parse(e);const t=document.querySelector("#navUl");if(n==="Applicant")U([{href:"/",text:"Home"},{href:"/pages/user/",text:"Profile"},{href:"/pages/listings/",text:"Listings"}]).forEach(s=>t.append(s)),t.append(j(n));else if(n==="Admin")U([{href:"/",text:"Home"},{href:"/pages/admin/",text:"Profile"},{href:"/pages/listings/",text:"Listings"}]).forEach(s=>t.append(s)),t.append(j(n));else if(n==="Client")U([{href:"/",text:"Home"},{href:"/pages/user/",text:"Profile"},{href:"/pages/listings/",text:"Listings"}]).forEach(s=>t.append(s)),t.append(j(n));else if(n===null){U([{href:"/",text:"Home"},{href:"/pages/listings/",text:"Listings"}]).forEach(r=>t.append(r)),t.append(j(n));const s=document.createElement("li");s.classList.add("nav-item");const i=document.createElement("a");i.classList.add("btn","btn-theme-secondary","text-black","fw-semibold","navBtnCustomWidth"),i.href="/pages/auth/register/applicant/",i.textContent="Register",i.id="registerUser",F(s,i),s.append(i),t.append(s)}};function U(e){const n=window.location.pathname;return e.map(t=>{const o=document.createElement("li");o.classList.add("nav-item");const a=document.createElement("a");return a.classList.add("nav-link","text-white"),a.href=t.href,a.textContent=t.text,F(o,a),n===t.href?a.setAttribute("aria-current","page"):a.setAttribute("aria-label",`${t.text} page`),o.append(a),o})}const Me=()=>{const e=document.querySelectorAll(".footer-nav-link"),n=()=>{const t=window.location.pathname;e.forEach(o=>{const s=o.getAttribute("href")===t;o.classList.toggle("active-footer-link",s)})};e.forEach(t=>{t.addEventListener("click",function(o){o.preventDefault(),e.forEach(s=>s.classList.remove("active-footer-link")),this.classList.add("active-footer-link");const a=this.getAttribute("href");a&&a!=="#"&&(window.location.href=a)})}),n()},je=()=>{const e=document.querySelector("footer");e.classList.add("bg-theme-dark","pt-5","p-2","mt-auto","pb-5");const n=document.createElement("div");n.className="container-fluid justify-content-center",e.append(n);const t=document.createElement("div");t.className="row center-desktop",n.append(t);const o=document.createElement("div");o.className="col-xl-1 col-xxl-2 d-none d-lg-block",t.append(o);const a=document.createElement("div");a.className="col-12 col-xl-10 col-xxl-8",t.append(a);const s=document.createElement("div");s.className="row row-cols-1 row-cols-sm-2 row-cols-md-4",a.append(s);const i=(w,b,L,x)=>{const E=document.createElement(b);E.className=L,E.textContent=x,w.append(E)},r=w=>{const b=document.createElement("div");b.className="col mb-5 mb-md-0";const L=document.createElement("div");return L.className="col-12 col-md-10 col-lg-9",b.append(L),w.append(b),L},l=r(s);i(l,"h4","text-white mb-3 fw-bold","About Noroff Job Agency"),i(l,"p","text-white","Noroff Jobs is a student-built and student-run employment agency designed to link Industry Partners with skilled candidates."),i(l,"p","text-white","Noroff Jobs is a non-profit organisation dedicated to placing students into their ideal workplace.");const d=r(s);i(d,"h4","text-white mb-3 fw-bold","For Companies");const u=document.createElement("ul");u.className="p-0 d-flex flex-column gap-1",d.append(u);const m=(w,b,L)=>{const x=document.createElement("li");x.className="list-group-item";const E=document.createElement("a");E.href=b,E.className="nav-link text-white",E.id="navlink-footer",E.textContent=L,x.append(E),w.append(x)};m(u,"../../../../pages/footer/aboutNoroffJobs.html","About Noroff Jobs"),m(u,"#","Company User Guide"),m(u,"../../../../pages/footer/faq.html","FAQ");const c=r(s);i(c,"h4","text-white mb-3 fw-bold","Contact us"),i(c,"p","text-white","Noroff Education AS"),i(c,"p","text-white","Tordenskjoldsgate 9"),i(c,"p","text-white","4612 Kristiansand S");const f=document.createElement("div");f.className="d-flex flex-column gap-1",c.append(f);const y=document.createElement("a");y.href="tel:38000000",y.className="nav-link text-white",y.id="navlink-footer";const h=document.createElement("img");h.src="/assets/icons/phone.svg",h.className="footerIcon",h.alt="phoneIcon",y.append(h),y.append(" 38000000"),f.append(y);const S=document.createElement("a");S.href="mailto:utdanning@noroff.no",S.className="nav-link text-white",S.id="navlink-footer-id";const v=document.createElement("img");v.src="/assets/icons/mail.svg",v.className="footerIcon",v.alt="mailIcon",S.append(v),S.append(" utdanning@noroff.no"),f.append(S);const N=r(s);i(N,"h4","text-white mb-3 fw-bold","Resources");const k=document.createElement("ul");k.className="p-0 d-flex flex-column gap-1",N.append(k),m(k,"../../../../pages/footer/privacypolicy.html","Privacy Policy"),m(k,"../../../../pages/footer/termsofuse.html","Terms of use");const q=document.createElement("div");q.classList.add("col-xl-1","col-xxl-2","d-none","d-lg-block"),t.append(q),Me()};function Ue(){document.querySelector("[aria-current]")!==null&&document.querySelector("[aria-current]").classList.add("fw-bold")}const Fe=()=>{Ce()&&(Re(),Ue()),je()};async function Oe(e){if(!e)throw new Error("Get requires an application ID");const n=C.toString()+ge+e,o=await z(n,{method:"GET",headers:{"Content-Type":"application/json"}});if(!o.ok)throw new Error(`Error fetching application: ${o.statusText}`);const a=await o.json();console.log(a);const{media:s,title:i,jobTitle:r,companyName:l,location:d,listingCreated:u,deadline:m,applicantsCount:c,applicantsName:f,applicationCreated:y,email:h,address:S,phone:v,body:N,link:k,file:q}=a,w=document.getElementById("applicationData"),b=document.createElement("div"),L=document.createElement("div"),x=document.createElement("div"),E=document.createElement("div"),P=document.createElement("div"),V=document.createElement("div"),B=document.createElement("img"),R=document.createElement("button"),M=document.createElement("button");return B.src=s,B.alt=i,R.innerHTML='<i class="fa-solid fa-xmark m-0"></i>',R.dataset.bsDismiss="modal",M.textContent="delete",M.dataset.auth="delete-application",P.innerHTML=`
  <h1 class="card-title fw-normal">${i}</h1>
  <ul class="list-unstyled d-flex gap-1">
    <li>${r}</li>
    <li>&#47;</li>
    <li>${l}</li>
    <li>&#47;</li>
    <li>${d}</li>
  </ul>
  <ul class="list-unstyled d-flex gap-1">
    <li>${u}</li>
    <li>&#x2022;</li>
    <li>${m}</li>
    <li>&#x2022;</li>
    <li>${c}</li>
  </ul>
  <hr />
  <div class="d-flex flex-column flex-sm-row justify-content-between">
    <h2 class="fs-2 fw-semibold">${f}</h2>
    <p>${y}</p>
  </div>
  <div class="d-flex gap-3 my-3">
  <button class="btn btn-theme-primary text-uppercase text-white w-100">Apply Now</button>
  <button class="btn btn-theme-secondary"><i class="fa-regular fa-heart"></i></button>
</div>
  <ul class="list-unstyled">
    <li>${h}</li>
    <li>${S}</li>
    <li>${v}</li>
  </ul>
  <p class="mt-5">${N}</p>
  <ul class="list-unstyled my-5 d-flex flex-column gap-2">
  <li class="fst-italic">
    <span><i class="fa-solid fa-link"></i></span> <a href="#" class="text-decoration-none text-reset">${k}</a>
  </li>
  <li>
    <span><i class="fa-solid fa-download"></i></span> ${q}
  </li>
</ul>`,b.classList.add("modal"),L.classList.add("modal-dialog","modal-lg"),x.classList.add("modal-content","container-md","border-0","rounded-0","p-0","bg-light","text-capitalize","m-auto"),E.classList.add("position-relative"),B.classList.add("card-img-top","rounded-0","img-responsive"),R.classList.add("btn","position-absolute","end-0","fs-4","bg-black","text-white","rounded-0","py-0"),P.classList.add("card-body","p-4"),V.classList.add("d-grid","d-sm-block","p-4"),M.classList.add("btn","btn-dark","px-5","rounded-1","text-uppercase"),b.id="modal",E.append(R,B),V.append(M),x.append(E,P,V),L.append(x),b.append(L),w.append(P),b}function Ve(e,n){const t=e.nextElementSibling,o=e.value.trim()!=="";return t.textContent=o?"":"Sector is required.",e.classList.remove("is-invalid","is-valid"),t.classList.remove("alert","alert-danger","valid-feedback"),!o&&!n?(e.classList.add("is-invalid"),t.classList.add("alert","alert-danger")):o?(e.classList.add("is-valid"),t.classList.add("valid-feedback")):!o&&n&&(t.textContent="",t.classList.remove("alert","alert-danger")),o}function Je(e,n){const t=e.nextElementSibling,o=e.value.trim()!=="";return t.textContent=o?"":"Company name is required.",e.classList.remove("is-invalid","is-valid"),t.classList.remove("alert","alert-danger","valid-feedback"),!o&&!n?(e.classList.add("is-invalid"),t.classList.add("alert","alert-danger")):o?(e.classList.add("is-valid"),t.classList.add("valid-feedback")):!o&&n&&(t.textContent="",t.classList.remove("alert","alert-danger")),o}function He(e,n){const t=e.nextElementSibling,o=e.value.length>=8;return t.textContent=o?"":"Password must be at least 8 characters.",e.classList.remove("is-invalid","is-valid"),t.classList.remove("alert","alert-danger","valid-feedback"),!o&&!n?(e.classList.add("is-invalid"),t.classList.add("alert","alert-danger")):o?(e.classList.add("is-valid"),t.classList.add("valid-feedback")):!o&&n&&(t.textContent="",t.classList.remove("alert","alert-danger")),o}function Ge(e,n,t){const o=n.nextElementSibling,a=n.value===e.value;return n.value.trim()===""?(o.textContent="Please repeat the password.",o.classList.add("alert","alert-danger"),n.classList.add("is-invalid"),n.classList.remove("is-valid"),!1):(o.textContent=a?"":"Passwords don't match.",n.classList.remove("is-invalid","is-valid"),o.classList.remove("alert","alert-danger","valid-feedback"),!a&&!t?(n.classList.add("is-invalid"),o.classList.add("alert","alert-danger")):a?(n.classList.add("is-valid"),o.classList.add("valid-feedback")):!a&&t&&(o.textContent="",o.classList.remove("alert","alert-danger")),a)}function ze(e,n){const t=e.nextElementSibling,o=/^[a-zA-ZæøåÆØÅ-]+ [a-zA-ZæøåÆØÅ-]+$/,a=e.value.trim().replace(/\s+/g," "),s=o.test(a);return t.textContent=s?"":"Full Name must be in the format: Firstname Lastname",e.classList.remove("is-invalid","is-valid"),t.classList.remove("invalid-feedback","alert","alert-danger","valid-feedback"),!s&&!n?(e.classList.add("is-invalid"),t.classList.add("alert","alert-danger")):s?(e.classList.add("is-valid"),t.classList.add("valid-feedback")):!s&&n&&(t.textContent="",t.classList.remove("alert","alert-danger")),s}function Ke(e,n){const t=e.nextElementSibling,a=/^[\w\-.]+@(stud.)?noroff.no$/.test(e.value);return t.textContent=a?"":"Invalid email address. Use a valid noroff.no or stud.noroff.no email.",e.classList.remove("is-invalid","is-valid"),t.classList.remove("alert","alert-danger","valid-feedback"),!a&&!n?(e.classList.add("is-invalid"),t.classList.add("alert","alert-danger")):a?(e.classList.add("is-valid"),t.classList.add("valid-feedback")):!a&&n&&(t.textContent="",t.classList.remove("alert","alert-danger")),a}function Qe(e,n){const t=e.nextElementSibling,a=/^[\w\-.]+@[\w\-.]+\.[a-zA-Z]{2,}$/.test(e.value);return t.textContent=a?"":"Invalid email address.",e.classList.remove("is-invalid","is-valid"),t.classList.remove("alert","alert-danger","valid-feedback"),!a&&!n?(e.classList.add("is-invalid"),t.classList.add("alert","alert-danger")):a?(e.classList.add("is-valid"),t.classList.add("valid-feedback")):!a&&n&&(t.textContent="",t.classList.remove("alert","alert-danger")),a}const g={validateCompanyName:Je,validateSector:Ve,validatePassword:He,validateRepeatPassword:Ge,validateFullName:ze,validateEmail:Ke,validateCompanyEmail:Qe};function Ze(){const e=document.querySelector("#email"),n=localStorage.getItem("email"),t=document.querySelector("#loginForm");e.addEventListener("blur",()=>{const o=document.getElementById("email");g.validateCompanyEmail(o)}),n&&e&&(e.value=JSON.parse(n)),t&&t.addEventListener("submit",o=>{o.preventDefault();const a=o.target,s=new FormData(a),i=Object.fromEntries(s.entries());De(i)})}function We(){const e=document.querySelector("#registerForm-applicant"),n=document.querySelector("#passwordStudent"),t=document.querySelector("#repPasswordStud"),o=document.querySelector("#fullName"),a=document.querySelector("#emailStudent");e&&(n.addEventListener("blur",()=>{g.validatePassword(n,!1)}),n.addEventListener("input",()=>{g.validatePassword(n,!0)}),t.addEventListener("blur",()=>{g.validateRepeatPassword(n,t,!1)}),t.addEventListener("input",()=>{g.validateRepeatPassword(n,t,!0)}),o.addEventListener("input",()=>{g.validateFullName(o,!0)}),o.addEventListener("blur",()=>{g.validateFullName(o,!1)}),a.addEventListener("blur",()=>{g.validateEmail(a,!1)}),a.addEventListener("input",()=>{g.validateEmail(a,!0)}),e.addEventListener("submit",async s=>{s.preventDefault();const i=g.validatePassword(n),r=g.validateRepeatPassword(n,t),l=g.validateFullName(o),d=g.validateEmail(a);if(!i||!r||!l||!d){T("danger","Invalid registration credentials. Please try again","#errorMessage");return}const u=new FormData(e),m=Object.fromEntries(u.entries()),c=document.querySelector("#imageUrl").value,f=o.value.split(" ");m.firstName=f[0],m.lastName=f.slice(1).join(" ");const y={...m,imageUrl:c},{error:h}=await le(y);if(h){T("danger","An error occured when attempting to register user. Please try again","#errorMessage"),console.error(h);return}T("success","Registration successful! You can now login.","#errorMessage");const v=window.location.pathname.replace("/register/applicant","/login");window.location.href=v}))}function Xe(){const e=C.toString()+K;return fetch(e).then(n=>{if(!n.ok)throw new Error(`Something went wrong: Error ${n.status}`);return n.json()})}function Ye(){const e=document.querySelector("#registerForm-company");if(e){const n=e.querySelector("#userEmail"),t=e.querySelector("#companyName"),o=e.querySelector("#userPassword"),a=e.querySelector("#userConfirmPassword"),s=e.querySelector("#companySector"),i=e.querySelector("#userName");n.addEventListener("blur",()=>{g.validateCompanyEmail(n,!1)}),t.addEventListener("blur",r=>{g.validateCompanyName(r.target,!1)}),o.addEventListener("blur",()=>{g.validatePassword(o,!1)}),a.addEventListener("blur",()=>{g.validateRepeatPassword(o,a,!1)}),s.addEventListener("blur",()=>{g.validateSector(s,!1)}),i.addEventListener("blur",()=>{g.validateFullName(i,!1)}),e.addEventListener("submit",async r=>{r.preventDefault();const l=document.querySelector("#registrationSuccessMessage"),d=document.querySelector("#errorMessage"),u=g.validateCompanyEmail(n),m=g.validateCompanyName(t),c=g.validatePassword(o),f=g.validateRepeatPassword(o,a),y=g.validateSector(s),h=g.validateFullName(i);if(!u||!m||!c||!f||!y||!h){T("danger","Invalid registration credentials. Please try again","#errorMessage");return}const S=new FormData(r.target),v=Object.fromEntries(S.entries());if(await _e(v.name)){J(d,`Company name <strong>${v.name}</strong> already exists`);return}const k=v.name.split(" "),q={firstName:k[0],lastName:k.slice(1).join(" "),email:v.email,password:v.password,role:"Client"};try{const w=await le(q),b=w.data;if(w.error)throw new Error(w.error);const L={name:v.name,email:v.email,sector:v.sector,website:v.website,phone:v.phone,logo:"",admin:b.id,registerToken:b.token},x=await Pe(L);if(x.error)throw new Error(x.error);et(d),J(l,`Company <strong>${v.name}</strong> registered successfully! <a href="/pages/auth/login/index.html">Login</a> to continue.`)}catch(w){J(d,`Error: ${w.message}`)}})}}async function _e(e){return(await Xe()).some(t=>t.name===e)}function J(e,n){e.classList.remove("d-none"),e.innerHTML=n}function et(e){e.classList.contains("d-none")||e.classList.add("d-none"),e.innerHTML=""}new G("token");const tt=setInterval(()=>{const e=document.getElementById("viewListingsButton");e&&(e.addEventListener("click",function(){window.location.href="/pages/listings/index.html"}),clearInterval(tt))},50),X=document.getElementById("formContainer"),Y=e=>{if(e=="companyReg"){X.innerHTML=`<form class="container mb-3 mt-3 shadow bg-white p-3">
        <h2>Register Company</h2>
        <div class="d-flex gap-3 mt-5">
          <div class="container d-flex flex-column gap-2">
            <img src="https://via.placeholder.com/150" class="rounded-circle w-25 align-self-center" alt="placeholder image">
            <a href="" class="text-black align-self-center">Add image</a>

            <label for="contactPerson">Contact person*</label>
            <input type="text" class="form-control" aria-label="Contact person" id="contactPerson">

            <label for="contactNumber">Contact number*</label>
            <input type="text" class="form-control" aria-label="Contact number" id="contactNumber">
          </div>
          <div class="container d-flex flex-column gap-2">
            <label for="companyName">Company name*</label>
            <input type="text" class="form-control" aria-label="Company name" id="companyName">
            
            <label for="emailStudent">Email*</label>
            <input type="email" class="form-control" aria-label="Email" id="emailStudent">

            <label for="password">Password*</label>
            <input type="password" class="form-control" aria-label="Password" id="password">

            <label for="repPassword">Repeat password*</label>
            <input type="password" class="form-control" aria-label="Repeat password" id="repPassword">
          </div>
        </div>
        <div class="d-flex flex-column gap-3 mt-5">
          <button class="btn btn-theme-secondary mx-auto btn-lg">Register</button>
          <button class="btn text-black align-self-center" id="companyReg" data-button-companyReg>Not an company? Register as applicant instead!</button>
        </div>
      </form>`;return}if(e=="studentReg"){X.innerHTML=`<form class="container mb-3 mt-3 shadow bg-white p-3">
        <h2>Register Applicants</h2>
        <div class="d-flex gap-3 mt-5">
          <div class="container d-flex flex-column gap-2">
            <img src="https://via.placeholder.com/150" class="rounded-circle w-25 align-self-center" alt="placeholder image">
            <a href="" class="text-black align-self-center">Add image</a>
            <label for="fullName">Full Name*</label>
            <input type="text" class="form-control" aria-label="Full name" id="fullName">
          </div>
          <div class="container d-flex flex-column gap-2">
            <label for="emailStudent">Email*</label>
            <input type="email" class="form-control" aria-label="Email" id="emailStudent">

            <label for="password">Password*</label>
            <input type="password" class="form-control" aria-label="Password" id="password">

            <label for="repPassword">Repeat password*</label>
            <input type="password" class="form-control" aria-label="Repeat password" id="repPassword">

            <label for="degrees">Degree(s)</label>
            <select class="form-select" aria-label="Default select example">
              <option selected>Open this select menu</option>
              <option value="">Applied Machine Learning</option>
              <option value="">Front-end Development</option>
              <option value="">Back-end Development</option>
              <option value="Full-stack Developer">Full-stack Developer</option>
              <option value="">Data Analyst</option>
              <option value="">UX/UI Design</option>
              <option value="">Graphic Design</option>
              <option value="">Music production</option>
              <option value="">Film production</option>
              <option value="">Digital marketing</option>
              <option value="">Video marketing in social Media</option>
              <option value="">3D art and game technology</option>
              <option value="">Network and IT security</option>
              <option value="">Network and System administration</option>
              <option value="">Cyber security</option>
              <option value="">Applied data science</option>
              <option value="">Digital Forensics</option>
              <option value="">Interactive Media - Animation</option>
              <option value="">Interactive Media - Games</option>
              <option value="">Modern project management</option>
              <option value="">Other</option>
            </select>
          </div>
        </div>
        <div class="d-flex flex-column gap-3 mt-5">
          <button class="btn btn-theme-secondary mx-auto btn-lg">Register</button>
          <button class="btn text-black align-self-center" id="studentReg" data-button-studentReg>Not an applicant? Register as company instead!</button>
        </div>
      </form>`;return}},nt=()=>{const e=document.getElementById("companyReg"),n=document.getElementById("studentReg");n&&n.addEventListener("click",()=>{Y("studentReg")}),e&&e.addEventListener("click",()=>{Y("companyReg")})},ce=document.getElementById("spinner-container");function ot(){ce.classList.remove("d-none")}function at(){ce.classList.add("d-none")}async function Q(){ot();try{const n=I+"listings",t=await z(n);if(!t.ok)throw new Error(`Error: ${t.status} ${t.statusText}`);const o=await t.json(),a=new Date,s=o.filter(i=>new Date(i.deadline)>=a);return s.sort((i,r)=>new Date(i.deadline)-new Date(r.deadline)),s}catch(e){throw console.error(e),e}finally{at()}}function st(e,n){document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById(e);t&&t.addEventListener("click",function(){window.location.href=n})})}let H=null;const O=async e=>{const n=document.querySelector(".listingContainer");n.innerHTML="",e||(H||(H=await Q()),e=H),e.map(it).forEach(a=>n.append(a));function o(){document.getElementById("searchListingContId").classList.remove("d-none")}o()},de=async()=>{const e=document.querySelector(".listingContainer");e.innerHTML="Sorry, no listings found"},it=({title:e,description:n,company:t,deadline:o,id:a})=>{const s=p("div",["col-12","col-lg-6"]),i=p("div",["row","p-2","px-3","g-3","bg-theme-light","m-0","shadow"]),r=rt(t),l=lt(e,n,o,a);return i.append(r,l),s.append(i),s},rt=({logo:e,name:n})=>{const t=p("div",["m-0","p-3","col-3","d-flex","flex-column","justify-content-center"]),o=p("img",["img-fluid","rounded-start"],null,null,null,e,n);return t.append(o),t},lt=(e,n,t,o)=>{const a=p("div",["m-0","col-9","d-flex","flex-column","gap-2","align-items-baseline"]),s=p("div",["card-body","d-flex","flex-column","gap-2","w-100"]),i=p("h2",["card-title","fw-bold","text-truncate"],null,e),r=p("p",["card-text","overflow-hidden"],null,n);r.style.cssText="-webkit-line-clamp: 2; display: -webkit-box; -webkit-box-orient: vertical;",s.append(i,r);const l=ct(t,o);return a.append(s,l),a},ct=(e,n)=>{const t=p("div",["d-flex","flex-column","flex-sm-row","align-items-end","justify-content-between","w-100"],null,null,null,null,null),o=p("span",null,null,"DeadLine:  "+re(e)),a=p("a",["bg-theme-primary","text-theme-black","px-3","text-decoration-none"],null,"View","/pages/listings/listing/index.html?id="+n);return a.addEventListener("click",dt),t.append(o,a),t};function dt(){window.location.href="../../..//pages/listings/listing/index.html"}st("backButton","/pages/listings/index.html");async function mt(e,n){if(!e)throw new Error("Edit requires a listing ID");const t=C.toString()+$+e;try{const o=D("token");if(!o)throw new Error("Access token is not available");const s={method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o.replace(/^"|"$/g,"")}`},body:JSON.stringify(n)},i=await fetch(t,s);if(i.ok)document.getElementById("hide-edit-modal").click(),new bootstrap.Modal(document.querySelector("#success-modal")).show();else{const r=await i.json();throw alert(`Error editing listing: ${r.message}`),new Error(`Error editing listing: ${r.message||i.statusText}`)}return i.json()}catch(o){throw console.error("Edit listing failed:",o),o}}const ut=new URL(location.href),me=ut.searchParams.get("id"),pt=C.toString()+$+me;async function ft(e){const n=await fe(e),o=new Date(n.deadline).toISOString().split("T")[0];document.getElementById("editTitle").value=`${n.title}`,document.getElementById("editTags").value=`${n.tags}`,document.getElementById("editDeadline").value=`${o}`,document.getElementById("editRequirements").value=`${n.requirements}`,document.getElementById("editDescription").value=`${n.description}`}function _(){const e=document.querySelector("#edit-listing-button-show-hide");if(!localStorage.getItem("token"))e&&(e.style.display="none");else{e.style.display="block",ft(pt);const t=document.querySelector("#editListing"),o=document.querySelector("#editListingViewListingBtn");t&&o&&(t.addEventListener("submit",gt),o.addEventListener("click",()=>{window.location.reload()}))}}async function gt(e){e.preventDefault();const n=e.target,t=new FormData(n),o=Object.fromEntries(t.entries());mt(me,o)}const ee=document.querySelector("#profileImage"),te=document.querySelector("#profileName"),yt=document.querySelector("#profileRole"),vt=document.querySelector("#profileContact"),ne=document.querySelector("#skillsList"),ht=document.querySelector("#descriptionHeader"),bt=document.querySelector("#descriptionBody"),wt=document.querySelector("#editStudentProfile");function Lt(e){const{firstName:n,lastName:t}=e;te.innerText=n+" "+t,ee.src=e.avatar||"https://miniforetak.no/wp-content/plugins/buddyboss-platform/bp-core/images/profile-avatar-buddyboss.png",ee.alt=(te.innerText||"Unknown")+"avatar",yt.innerText=e.role,vt.classList.add("d-none");const{skills:o}=e;ne.innerHTML="",Array.isArray(o)&&o.length>0&&o.forEach(a=>{const s=document.createElement("li");s.classList.add("fw-bolder","fs-6","ms-0"),s.innerText=a.trim(),ne.append(s)}),ht.innerText="About me",bt.textContent=e.about,wt.classList.remove("d-none")}const oe=document.querySelector("#profileImage"),ae=document.querySelector("#profileName"),Et=document.querySelector("#profileContact"),xt=document.querySelector("#skillsContainer"),St=document.querySelector("#descriptionHeader"),kt=document.querySelector("#descriptionBody"),Ct=document.querySelector("#editCompanyProfile");function Tt(e){ae.innerText=e.company.name,oe.src=e.company.logo||"https://shop.raceya.fit/wp-content/uploads/2020/11/logo-placeholder.jpg",oe.alt=(ae.innerText||"Unknown")+" logo",Et.innerText=e.company.sector,xt.classList.add("d-none"),St.innerText="About us",kt.textContent=`The "description/about" property does not exists on the company Object at this time. 
  The client cant add anything to it. Therefore this text you see is hardcoded until that is fixed`,Ct.classList.remove("d-none")}const It=document.querySelector("#editProfileBtn");function qt(e){const n=e.role;n==="Client"?Tt(e):n==="Applicant"?Lt(e):It.classList.add("d-none")}function Nt(e,n){const t=document.createElement("div");t.classList.add("d-flex","my-2");const o=document.createElement("button");o.classList.add("btn","btn-dark","mx-1"),o.innerHTML="&#10005;",o.type="button",o.addEventListener("click",()=>t.remove());const a=document.createElement("select");a.name="degree",t.append(a,o);const s=document.createElement("option");return s.innerHTML="Choose a degree",a.append(s),a.classList.add("form-select"),e.forEach(i=>{const r=document.createElement("option");r.innerHTML=i.name,r.value=i.name,a.append(r)}),n.append(t),t}const $t=[{name:"Applied Machine Learning"},{name:"Front-end Development"},{name:"Back-end Development"},{name:"Data Analyst"},{name:"UX/UI-Design"},{name:"Graphic Design"},{name:"Music Production"},{name:"Film Production"},{name:"Digital Marketing"},{name:"Video Marketing in Social Media"},{name:"3D Art in Game Technology"},{name:"Network and IT security"},{name:"Network and System Administration"},{name:"Cyber Security"},{name:"Applied Data Science"},{name:"Digital Forensics"},{name:"Interactive Media - Animation"},{name:"Interaction Media - Games"},{name:"Modern Project Management"},{name:"Other"}];function Dt(){const e=document.getElementById("degreesButton"),n=document.getElementById("degreesContainer");e.addEventListener("click",()=>Nt($t,n))}function At(){const e=document.querySelector("#avatarInput"),n=document.querySelector("#avatarLabel"),t=document.querySelector("#logoInput"),o=document.querySelector("#logoLabel");window.addEventListener("click",a=>{(a.target===n||a.target===o)&&(e.classList.remove("d-none"),t.classList.remove("d-none"))}),window.addEventListener("click",a=>{a.target!==n&&a.target!==e&&e.classList.add("d-none")}),window.addEventListener("click",a=>{a.target!==o&&a.target!==t&&t.classList.add("d-none")})}async function Pt(e){const n=localStorage.getItem("companyId"),t=I+K+`${n}`,o=JSON.parse(D()),s={method:"PUT",body:JSON.stringify(e),headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`}};try{const i=await fetch(t,s),r=await i.json();switch(i.status){case 200:return console.log(r),alert("Update was successful"),r;default:throw new Error(`${i.status} ${i.statusText}`)}}catch(i){T("danger","An error occured when attempting to edit company details","#editCompanyErrorContainer"),console.error(i)}}const Bt="PUT",Rt="users/";async function Mt(e){const n=JSON.parse(localStorage.getItem("id")),t=I+Rt+`${n}`,a=D().replace(/^"|"$/g,""),s=JSON.stringify(e),i={method:Bt,body:s,headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`}};try{const r=await fetch(t,i),l=await r.json(),d=document.getElementById("success-modal"),u=()=>{d.close(),d.style.display="none"};switch(r.status){case 200:return d.style.display="flex",d.showModal(),d.addEventListener("click",u),l;default:throw new Error(`${r.status} ${r.statusText}`)}}catch(r){T("danger","An error occured when attempting to edit user details","#editUserErrorContainer"),console.error(r)}}function jt(){const e=document.querySelector("#editStudentProfile"),n=document.querySelector("#editCompanyProfile");e&&e.addEventListener("submit",t=>{t.preventDefault();const o=t.target,a=new FormData(o),s=Object.fromEntries(a.entries());return console.log(s),Mt(s)}),n&&n.addEventListener("submit",t=>{t.preventDefault();const o=t.target,a=new FormData(o);console.log(a);const s=new FormData;console.log(s);for(const[r,l]of a.entries())l!==""&&s.append(r,l);const i=Object.fromEntries(s.entries());return console.log(i),Pt(i)})}function Ut(){const e=document.getElementById("studentModalButton"),n=document.getElementById("companyModalButton"),t=document.getElementById("editStudentProfile"),o=document.getElementById("editCompanyProfile");e.addEventListener("click",a=>{a.target===e&&(t.classList.remove("d-none"),o.classList.add("d-none"))}),n.addEventListener("click",a=>{a.target===n&&(o.classList.remove("d-none"),t.classList.add("d-none"))})}const A=e=>{const n=D(),t={};return e&&(t["Content-Type"]=e),n&&(t.Authorization=`Bearer ${n}`),t},Ft="https://cors.noroff.dev/https://agency-api.noroff.dev/";async function ue(){const e=Ft+"users/"+JSON.parse(localStorage.getItem("id")),n={method:"GET",headers:A()},o=await(await fetch(e,n)).json();qt(o),o.company&&localStorage.setItem("companyId",o.company.id),o.role==="Client"&&localStorage.setItem("companyName",o.company.name)}function Ot(){const e=document.querySelector("#studentDescription");console.log(e);const n=document.querySelector("#studentSkills");document.getElementById("editProfileModal").addEventListener("show.bs.modal",async function(){try{const o=await ue();o?(e.innerText=o.about,n.innerText=o.skills.join(", ")):(e.innerText="",n.innerText="")}catch(o){console.error(o)}})}function Vt(){var t;const e=document.getElementById("favoriteListings");if(!e)return;((t=localStorage.getItem("role"))==null?void 0:t.replace(/^"|"$/g,"").trim().toLowerCase())==="client"&&(e.style.display="none")}function Jt(){Dt(),At(),Ut(),jt(),ue(),Ot(),Vt()}const Ht=I+"users";function pe(){async function e(n,t){try{const o={method:"GET",headers:A(),body:JSON.stringify(t)},i=(await(await fetch(Ht,o)).json()).users;for(let r=0;r<i.length;r++){const l=i[r].company.title+` [ ${i[r].company.department} ]`,d=i[r].company.name,u=i[r].company.address.postalCode;jobListings.innerHTML+=`
        <div class="card flex-row p-0 gap-4 w-auto">
          <img src="https://via.placeholder.com/150 " alt="Illustration of close icon"/>
          <div class="d-flex flex-column gap-2 me-3">
            <h3>${d}</h3>
            <p>${l}#-${u}</p>
            <p>Some text from the company</p>
            <div class="d-flex gap-2 align-content-center align-items-center">
              <p>() Applications</p>
              <p>Ends at:</p>
              <button class="btn btn-info text-white">View</button>
              <button class="btn btn-sm btn${u}" id="deleteUserBtn">
                <img src="/assets/icons/delete-black.svg" alt="Delete button" class="footerIcon" />
              </button>
            </div>
          </div>
        </div>
        `}}catch(o){console.log(o)}}e()}async function Gt(){const e=I+"users",n={method:"GET",headers:A()};try{return(await(await fetch(e,n)).json()).users}catch(t){return console.log(t),t}}async function zt(e){if(!e)throw new Error("Delete user requires a user ID");const n=C.toString()+ye+e,t={method:"DELETE"};try{const o=await fetch(n,t);if(!o.ok)throw new Error(`Error deleting user: ${o.statusText}`);const a=await o.json();return console.log(a),a}catch(o){throw console.error("Delete user failed:",o),o}}async function Kt(e){document.querySelector(`#deleteBtn${e}`).addEventListener("click",n=>{n.preventDefault(),zt(e)})}async function Qt(){const e=document.querySelector("#userProfile"),n=await Gt();let t="";n.forEach(o=>{const a=`${o.firstName} ${o.lastName}`,s=o.email,i=o.id;t+=`<tr>
                    <th scope="row">${a}</th>
                    <td>${s}</td>
                    <td>
                    <button class="btn btn-sm" id="deleteBtn${i}"><img src="/assets/icons/delete-black.svg" alt="Delete button" class="footerIcon" /></button>
                    </td>
                  </tr>`}),e.innerHTML=t,n.forEach(o=>{const a=o.id;Kt(a)})}const Zt=I+"users";async function Wt(e,n){try{const t={method:"GET","Content-Type":"application/json",body:JSON.stringify(n)},s=(await(await fetch(Zt,t)).json()).users;Xt(s)}catch(t){return console.log(t),"Bye"}}async function Xt(e){var n="";if(e!=null&&e!==""){for(let t=0;t<e.length;t++){const o=e[t].firstName+" "+e[t].lastName,a="09:30 <br> 30/05/2023",s=e[t].email,i=e[t].address.address+", "+e[t].address.city+" "+e[t].address.state+" "+e[t].address.postalCode,r=e[t].phone,l="Lorem!",d="Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Bibendum enim facilisis gravida neque convallis a cras. Ut faucibus pulvinar elementum integer enim neque. <br><br>Bibendum enim facilisis gravida neque convallis a cras. Ut faucibus pulvinar elementum integer enim neque.",u=e[t].image,m="ExampleFilename.pdf",c=e[t].company.title,f=e[t].company.name,y=e[t].company.address.postalCode;if(n=`
      <tr>
        <th scope="row" class="applicant-modal" data-bs-toggle="modal" data-bs-target="#applicantModal${t}">${o}</th>
        <div class="modal fade applicant" id="applicantModal${t}" tabindex="-1" aria-labelledby="applicantModalLabel${t}" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered">
                  <div class="modal-content rounded-0 border-0">
                    <div class="close-btn-content">
                      <div class="close-btn float-end">
                        <button type="button" class="btn-close btn-close-white rounded-0" data-bs-dismiss="modal" aria-label="Close"></button>
                      </div>
                    </div>
                    <div class="modal-header border-0 align-items-center px-4 pb-0 mt-5 fw-normal">
                      <h1 class="modal-title" id="applicantModalLabel${t}">${o}</h1>
                      <p class="m-0 time-date"> ${a} </p>
                    </div>
                    <div class="modal-body px-4 pt-0">
                      <p class="py-3 fw-normal">
                        <span > ${s} </span>
                        <br />
                        <span > ${i} </span>
                        <br />
                        <span > ${r} </span>
                      </p>
                      <p>${l}</p>
                      <p class="fw-normal mb-4">${d}</p>
                      <p>${o}</p>
                      <a href="${u}" class="list-group-item fw-normal fst-italic"><img src="/assets/icons/linkApplicant.svg" alt="Link icon" class="footerIcon me-3" /> ${u}</a>
                      <a href="#" class="list-group-item fw-normal mt-2"><img src="/assets/icons/download.svg" alt="File icon" class="footerIcon me-3" download/> ${m}</a>
                    </div>
                    <div class="modal-footer border-0 px-4 my-4 justify-content-start">
                      <button type="button" class="btn rounded-0">DELETE</button>
                    </div>
                  </div>
                </div>
              </div>
        <td class="job-title">${c}</td>      
        <td class="company-name">${f}</td>
        <td class="applicant-id">#-${y}</td>
        <td>
            <button class="btn btn-sm applicant-delete-btn"><img src="/assets/icons/delete-black.svg" alt="Delete button" class="footerIcon" /></button>
        </td>
      </tr>
      `,typeof document<"u"){const h=document.querySelector("#applicants");h&&(h.innerHTML+=n)}}return n}else console.log("No application data found.")}function Yt(){pe(),Qt(),Wt()}async function _t(e){const n=`${I}${$}`;try{const t=await fetch(n,{method:"POST",headers:A("application/json"),body:JSON.stringify(e)});if(!t.ok)throw new Error(`Error creating application: ${t.statusText}`);return await t.json()}catch(t){throw console.error("Create application failed:",t),t}}function se(e){return e!==""}function en(e){return e.length>=5&&e.length<=50}function tn(e){return e.trim()?e.split(",").map(t=>t.trim()).every(t=>t.length>0&&!/\s/.test(t)):!1}function nn(e){return e.trim()?e.split(",").map(t=>t.trim()).every(t=>t.length>0&&!/\s/.test(t)):!1}function on(e){return new Date(e)>new Date}function an(e){return e.length>=10}function sn(){const e=document.querySelector("#createNewListing"),n=document.querySelector(".modal-body"),t=document.querySelector("#companySelect"),o=new bootstrap.Modal(document.getElementById("createModal"));function a(){if(JSON.parse(localStorage.getItem("role"))==="Client"){const m=localStorage.getItem("companyName"),c=document.createElement("option");c.value=m,c.textContent=m,t.appendChild(c)}else{const m=localStorage.getItem("id"),c=document.createElement("option");c.value=m,c.textContent=m,t.appendChild(c)}}a();const s=document.querySelector("#createTitle"),i=document.querySelector("#createTags"),r=document.querySelector("#createRequirements"),l=document.querySelector("#createDeadline"),d=document.querySelector("#createDescription");t.addEventListener("change",()=>{se(t.value)?t.setCustomValidity(""):t.setCustomValidity("Please select a company.")}),s.addEventListener("input",()=>{en(s.value)?s.setCustomValidity(""):s.setCustomValidity("Title should be between 5 and 50 characters")}),i.addEventListener("input",()=>{tn(i.value)?i.setCustomValidity(""):i.setCustomValidity('Tags should be separated by commas and contain dashes instead of spaces. IE "IT-worker, html, javascript, css"')}),r.addEventListener("input",()=>{nn(r.value)?r.setCustomValidity(""):r.setCustomValidity('Requirements should be separated by commas and contain dashes instead of spaces. IE "IT-worker, html, javascript, css"')}),l.addEventListener("change",()=>{on(l.value)?l.setCustomValidity(""):l.setCustomValidity("Deadline must be a future date")}),d.addEventListener("input",()=>{an(d.value)?d.setCustomValidity(""):d.setCustomValidity("Description must be at least 10 characters long.")}),e.addEventListener("submit",async u=>{if(u.preventDefault(),t.setCustomValidity(""),s.setCustomValidity(""),i.setCustomValidity(""),r.setCustomValidity(""),l.setCustomValidity(""),d.setCustomValidity(""),se(t.value)||t.setCustomValidity("Please select a company."),!e.reportValidity())return;const m={company:localStorage.getItem("companyId"),title:s.value,tags:i.value.split(",").map(c=>c.trim()),requirements:r.value.split(",").map(c=>c.trim()),deadline:l.value,description:d.value};try{await _t(m),n.innerHTML="";const c=document.createElement("img");c.src="/assets/icons/checkmark.svg",c.alt="Success";const f=document.createElement("h3");f.textContent="Listing created successfully!",n.appendChild(c),n.appendChild(f),o.show()}catch(c){n.innerHTML="";const f=document.createElement("img");f.src="/assets/icons/cancel.svg",f.alt="Error";const y=document.createElement("h3");y.textContent=`Error: ${c.message}`,n.appendChild(f),n.appendChild(y),o.show()}})}async function rn(){const e=await Q(),n=document.querySelector("#searchListing");dn(t=>{const o=ln(e,t);o.length>0?O(o):de()},n)}function ln(e,n){return e.filter(t=>cn(t,n))}function cn(e,n){return n.length<2||e.title.toLowerCase().includes(n.toLowerCase())}function dn(e,n){n.onkeyup=t=>{e(t.target.value)}}async function mn(){const e=await Q();function n(u){const m=e.filter(c=>{const f=new Date(c.created);if(new Date().getTime()-f.getTime()<=u)return!0});m.length>0?O(m):de()}const t=document.querySelector("#allListings"),o=document.querySelector("#latestListings"),a=document.querySelector("#fourteenDaysListings"),s=document.querySelector("#thirtyDaysListings"),i=24*60*60*1e3,r=4*i,l=14*i,d=30*i;t.addEventListener("click",()=>{O(e)}),o.addEventListener("click",()=>{n(r)}),a.addEventListener("click",()=>{n(l)}),s.addEventListener("click",()=>{n(d)})}async function ie(){const e=document.querySelector("#delete-button-on-listing-screen"),n=document.getElementById("deleteListingModal"),t=new bootstrap.Modal(n);localStorage.getItem("token")?e&&(e.style.display="block",e.addEventListener("click",()=>{t.show()}),n.addEventListener("click",a=>{a.target.id==="cancel-delete-listing-btn"&&t.hide(),a.target.id==="confirm-delete-listing-btn"&&un()})):e&&(e.style.display="none")}async function un(){const e=localStorage.getItem("token"),n=document.getElementById("success-delete-modal"),t=new bootstrap.Modal(n);if(!e)throw new Error("Access token is not available");try{const a=new URL(location.href).searchParams.get("id"),s=`${C}${$}/${a}`,i={method:"DELETE",headers:A("application/json"),body:JSON.stringify()},r=await fetch(s,i),l=await r.json();if(r.ok)t.show(),document.getElementById("hide-delete-modal-btn").addEventListener("click",()=>{t.hide(),window.location.reload()});else throw alert(`Error deleting listing: ${l.message}`),new Error(`Error deleting listing: ${l.statusText}`);return l}catch(o){console.error(o)}}Fe();const pn=()=>{const e="Noroff Job";switch(document.body.id){case"homePage":document.querySelector("title").innerText=e+" || Homepage";break;case"adminPage":document.querySelector("title").innerText=e+" || Adminpage",Yt();break;case"singleListing":document.querySelector("title").innerText=e+" || listing",Z(),ie(),_();break;case"listing":document.querySelector("title").innerText=e+" || Listings",Z(),ie(),_();break;case"listings":document.querySelector("title").innerText=e+" || Job Listings",O(),rn(),mn();break;case"listingsPage":document.querySelector("title").innerText=e+" || Job Listings",pe();break;case"signIn":document.querySelector("title").innerText=e+" || Sign In",Ze();break;case"createListing":document.querySelector("title").innerText=e+" || createListing",sn();break;case"registerUser":document.querySelector("title").innerText=e+" || Register User",nt();break;case"registerPageApplicant":document.querySelector("title").innerText=e+" || Register Applicant",We();break;case"registerPageCompany":document.querySelector("title").innerText=e+" || Register Company",Ye();break;case"profilePage":document.querySelector("title").innerText=e+" || Profile",Jt();break;case"studentOffer":document.querySelector("title").innerText=e+" || Student Offer";break;case"offerPage":document.querySelector("title").innerText=e+" || Create Offer";break;case"applyPage":document.querySelector("title").innerText=e+" || Apply";break;case"singleApplicationPage":document.querySelector("title").innerText=e+" || Applicant",Oe();break;case"termsOfUse":document.querySelector("title").innerText=e+" || Terms Of Use";break;case"privacyPolicy":document.querySelector("title").innerText=e+" || Privacy Policy";break;case"faq":document.querySelector("title").innerText=e+" || FAQ - Frequently Asked Questions";break;case"404":document.querySelector("title").innerText=e+" || 404";break}};pn();
